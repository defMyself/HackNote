# 虚拟化

《系统虚拟化--原理与实现》

```
很可惜这个重要的结论是错误的，系统虚拟化技术中关于指令的划分，可以追溯到Popek 和 Goldberg 1974年的那篇论文Formal Requirements for Virtualizable Third Generation Architectures，这篇论文定义了一系列的概念，包括特权指令(privileged instructions), 敏感指令(sensitive instructions)，无害指令(innocuous instructions)，其中敏感指令有可分为控制敏感(control sensitive)和行为敏感(behavior sensitive)指令。 2005年出版的 Virtual Machines: Versatile Platforms for Systems and Processes中沿用这些概念，并用简单易懂的语言对着几个概念进行了解释。从第8章第2节就可以看到特权指令未必就是敏感指令。
```

## Linux虚拟化技术

NameSpace

Cgroup

《虚拟化与云计算》

《KVM虚拟化技术》

《Xen虚拟化技术》



Intel 虚拟化技术部门



系统虚拟化是一个跨领域的技术，涉及到计算机体系结构、操作系统、硬件等。

《深入探索Linux系统虚拟化》

读这种书，需要静下心来，结合源代码，必要的地方还要查阅系统结构、操作系统、硬件方面的资料，把书读厚。底层知识不是快餐，也没法速成。需要做时间的朋友。



* X86架构下的VMX扩展
* KVM如何模拟多处理器系统
* VMM为Guest准备物理内存
* 保护模式Guest的寻址
* 影子页表缺页异常处理
* 单核系统设计的PIC
* 多核系统设计的APIC
* 完全虚拟化、半虚拟化
* 支持SR-IOV的DMA重映射和中断重映射
* 典型的Overlay网络
* 计算节点、网络节点上的网络虚拟化技术



1. CPU危机原理
2. 编译原理
3. linux内核、存储、虚拟化、网络及高可用
4. 





## CPU

CPU体系结构有时候被成为标量体系结构，因为它旨在有效地处理串行指令。

标量流水线CPU和超标量CPU

## GPU

GPU是有序处理器

* 大规模并行
* 高效执行数据并行代码
* 高动态随机存取处理器带宽

FPGA架构





## 图灵机

说谎者悖论

罗素悖论

当一套理论开始描述自身时，就难免要出现悖论。

数学是不完美的，至少它没有自圆其说的能力。



判定问题：找到一个完备的系统，寻求能够判定命题真假的通用算法。

1936年图灵和丘奇分别给出了否定的答案

图灵机



判定问题的研究推动了对算法理论或可计算理论的研究，促进了递归函数论和图灵及理论的建立



能行性和可行性从计算复杂度方面对可解问题的判定问题的研究证明，一些理论虽然原则上是可判定的，但它的判定程序所需的计算步数太大，以至在实践上不可行。

例如，可判定的自然数的加法理论来说，已经说明，对于该理论的每一判定算法，都有长度为n的语句

通过研究命题逻辑的判定方法的复杂性，发现许多已知的组合型的判定问题都和划归为命题逻辑的判定问题，如果能找到判定命题逻辑中的公式是否为重言式的快速算法，则可以随之而获得一大批判定问题的快速算法。

目前，即未能找到命题逻辑的快速判定算法，也未能证明不存在它的快速判定算法。

公理集合论，证明论，递归函数论，模型论，和算法理论





## 递归函数论

递归论：研究解决问题的可行性的计算方法和计算的复杂度的一门学科。

尤其是研究递归函数及其推广。

递归论研究的函数主要包括本原函数，原始递归函数，递归半函数和递归全函数，可摹状函数等。



### 经典递归论

经典的递归论关注自然数集合的可计算性。





### 可计算性与可判定性

南京大学现代数学研究所 喻良

**公理化与计算**

* 公理必须是可计算的
* 证明必须是可计算的



### 原始递归函数

原始递归函数集合是满足以下规则的最小集合I:

1. 所有的n-元常数函数f(x1,...xn)=0属于I;
2. 后继函数f(x) = x+1属于I
3. 恒等函数f(x1,...,xn)=xi 属于i
4. d
5. d



### Ackermann函数

f(0,y) = y

f(x+1,0) = f(x,1)

f(x+1, y+1) = f(x, f(x+1,y))



直观上Ackerman函数能够被计算。但是Ackermann函数的增长速度超过了所有的原始递归函数。

因此原始递归函数不能作为可计算函数的定义。

### 部分递归函数





递归与递归可枚举集合

* 一个自然数集合A是递归的，如果它的特征函数是递归的。
* 一个自然数集合是递归可枚举的，如果存在一个部分递归函数p使得Vn(n<A <_>p(n))



*每一个递归集合都是递归可枚举的*

图灵可计算的函数，存在一台图灵机M使得对所有的n,p(n)=m当且仅当对M输入n时，其输出未m

一个函数是部分递归的当且仅当它是部分图灵可计算的。

丘奇图灵论题

一个函数是能行可计算的当且仅当它是图灵可计算的。



计算的其他表示

拉姆达演算



停机问题

存在一台图灵机U使得对于所有的图灵机M,存在一个数字e使得



Kleene范式定理

停机问题的不可判定性

一阶逻辑的不可判定性

一个关系R是可判定的，如果它的特征函数是递归的。

{p | p是一个有整数解的整系数多项式} 是不可判定的。



Tarski的部分实现

1. 初等几何的公里化与判定算法
2. 代数闭域的完备性与可判定性。



《computability》

《Classical recursion theory》





### 习题

证明一个无穷集合是递归的当且仅当它是一个严格递增的递归函数的值域。

证明一个无穷集合是递归可枚举的当且仅当它是一个1-1的递归函数的值域。

{e|发e是递归的}不是递归的

设计一个程序打印自身。

