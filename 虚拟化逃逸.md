# 虚拟化介绍

虚拟化技术包括了CPU虚拟化，内存虚拟化，I/O虚拟化等技术。

I/O虚拟化技术中的虚拟设备是大部分漏洞产生的根源

虚拟设备通常解决的是物理设备复用的问题，即如何将有限的硬件外设，例如网卡，抽象成多个网卡，来给不同的虚拟机使用。因此虚拟设备就应当有能力模拟出真实设备的完整功能，要能够为虚拟机提供所有真实设备本应支持的接口，并维护和记录自身状态。遇到需要真实硬件完成的功能时，再由虚拟设备进行传递和调用。

完整模拟硬件设备的功能并非容易的事，开发者需要遵循相关设备的功能说明书，以实现完整接口，供虚拟机使用。

这些功能说明书动辄百页，代码实现复杂度较高。再加上虚拟设备种类繁多，出现编码问题的可能性就更大了。



虚拟机防护的未来

安全的本质是攻防，这句话在几十年前的内存漏洞攻防中得到了完美体现。

栈不可执行 ROP技术

苹果的PAC机制



虚拟机逃逸同样也是内存破坏漏洞防护和利用的重要战场之一。当前的主流虚拟化技术方案，大多为了性能的考虑，尚未重视缓解措施的使用，例如地址随机性不够、存在可写可执行权限内存等问题。

软件安全领域，另一种大获成功的防护思路是沙箱。每个浏览器都会启用沙箱机制。

沙箱机制的基本思路是将被保护对象的权限降到最低，只给保护对象所需的最小权限集合。



VMware ESXI产品

沙箱绕过技巧

虚拟机保护技术

VMProtect Themida

